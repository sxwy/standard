<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.12" />
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>标准化大厂编程规范解决方案 | 开发规范</title><meta name="description" content="前端项目及编码规范">
    <link rel="stylesheet" href="/standard/assets/css/styles.a662efd3.css">
    <link rel="preload" href="/standard/assets/js/runtime~app.06ec8f29.js" as="script"><link rel="preload" href="/standard/assets/css/styles.a662efd3.css" as="style"><link rel="preload" href="/standard/assets/js/904.c26e757c.js" as="script"><link rel="preload" href="/standard/assets/js/app.8f039463.js" as="script">
    <link rel="prefetch" href="/standard/assets/js/rules_base_why.html.076dc819.js" as="script"><link rel="prefetch" href="/standard/assets/js/rules_project_structure.html.a3e62341.js" as="script"><link rel="prefetch" href="/standard/assets/js/guide_project_combat.html.8cda2340.js" as="script"><link rel="prefetch" href="/standard/assets/js/rules_project_version.html.9f556018.js" as="script"><link rel="prefetch" href="/standard/assets/js/rules_base_configuration.html.465c800b.js" as="script"><link rel="prefetch" href="/standard/assets/js/rules_project_template.html.d0439837.js" as="script"><link rel="prefetch" href="/standard/assets/js/rules_base_installation.html.2a875201.js" as="script"><link rel="prefetch" href="/standard/assets/js/rules_project_archive.html.8e7991d8.js" as="script"><link rel="prefetch" href="/standard/assets/js/rules_base_introduction.html.750ff1fc.js" as="script"><link rel="prefetch" href="/standard/assets/js/index.html.011b0ea1.js" as="script"><link rel="prefetch" href="/standard/assets/js/404.html.af28e083.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container external-link-icon"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/standard/"><img class="logo" src="/standard/images/logo.png" alt="开发规范"><span class="site-name can-hide" aria-hidden="true">开发规范</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link route-link-active auto-link" href="/standard/rules/base/why.html" aria-label="规范"><!---->规范<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/standard/guide/project/combat.html" aria-label="教程"><!---->教程<!----></a></div><div class="navbar-item"><a class="auto-link external-link" href="https://github.com/sxwy/standard" aria-label="源代码" rel="noopener noreferrer" target="_blank"><!---->源代码<!----></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link route-link-active auto-link" href="/standard/rules/base/why.html" aria-label="规范"><!---->规范<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/standard/guide/project/combat.html" aria-label="教程"><!---->教程<!----></a></div><div class="navbar-item"><a class="auto-link external-link" href="https://github.com/sxwy/standard" aria-label="源代码" rel="noopener noreferrer" target="_blank"><!---->源代码<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">基础 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link route-link-active auto-link sidebar-item active" href="/standard/rules/base/why.html" aria-label="why"><!---->why<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="/standard/rules/base/introduction.html" aria-label="介绍"><!---->介绍<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="/standard/rules/base/installation.html" aria-label="安装"><!---->安装<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="/standard/rules/base/configuration.html" aria-label="配置"><!---->配置<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">项目 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link auto-link sidebar-item" href="/standard/rules/project/structure.html" aria-label="项目结构"><!---->项目结构<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="/standard/rules/project/version.html" aria-label="版本管理"><!---->版本管理<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="/standard/rules/project/archive.html" aria-label="归档管理"><!---->归档管理<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="/standard/rules/project/template.html" aria-label="项目模板"><!---->项目模板<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="标准化大厂编程规范解决方案" tabindex="-1"><a class="header-anchor" href="#标准化大厂编程规范解决方案"><span>标准化大厂编程规范解决方案</span></a></h1><h2 id="_1、为什么需要编程规范" tabindex="-1"><a class="header-anchor" href="#_1、为什么需要编程规范"><span>1、为什么需要编程规范？</span></a></h2><p><strong>工欲善其事，必先利其器</strong></p><p>对于一些大型的企业级项目而言，通常情况下我们都是需要一个团队来进行开发的。而又因为团队人员对技术理解上的参差不齐，所以就会导致出现一种情况，那就是《<strong>一个项目无法具备统一的编程规范，导致项目的代码像多个不同材质的补丁拼接起来一样</strong>》</p><p>设想一下，下面的这段代码有一个团队进行开发，因为没有具备统一的代码标准，所以生成了下面的代码：</p><img src="/standard/images/rules_base_why_1.png" style="zoom:67%;"><p>这段代码可以正常运行没有问题，但是整体的代码结构却非常的难看。</p><blockquote><p>有的地方有空格进行分割，有的地方却没有</p><p>有的地方是单引号，有的地方却是双引号</p><p>有的地方有分号，有的地方没有分号</p><p>.... 这样的项目虽然可以正常运行，但是如果把它放到大厂的项目中，确实 <strong>不及格</strong> 的，它会被认为是 <strong>不可维护、不可扩展的代码内容</strong></p></blockquote><p>那么所谓的大厂标准的代码结构应该是什么样子的呢？</p><p>我们把上面的代码进行一下修正，做一个对比：</p><img src="/standard/images/rules_base_why_2.png" style="zoom:67%;"><p>修改之后的代码具备了统一的规范之后，是不是看起来就舒服多了！</p><p>并且以上所列举出来的只是《编程规范》中的一小部分内容！</p><p>那么有些同学可能就会说了，你列举出来这些编程规范有什么用啊！</p><p>哪怕你写上一部书，我们一个团队这么多人，总不能指望所有人都看一遍，并且严格的遵守你所说的规范吧！</p><p>说的没错！指望人主动的遵守这些规范不太现实</p><p>那怎么办呢？</p><p>那么我们可不可以另辟蹊径，让程序自动处理规范化的内容呢？</p><p>答案是：可以的！</p><p>这些也是我们本章节所需要讲解的重点内容！</p><p>本章节中我们会为大家讲解，如何自动化的对代码进行规范，其中主要包括：</p><ol><li>编码规范</li><li>git 规范</li></ol><p>两大类</p><p>下面以 vue-cli 为例，用来讲解代码规范</p><h2 id="_2、使用-vue-cli-创建项目" tabindex="-1"><a class="header-anchor" href="#_2、使用-vue-cli-创建项目"><span>2、使用 vue-cli 创建项目</span></a></h2><p>使用 vue-cli 创建项目</p><p>我们需要创建一个 <code>vue3</code> 的项目，而创建项目的方式依然是通过 <code>vue-cli</code> 进行创建。</p><p>不过这里有一点大家需要注意，因为我们需要使用最新的模板，所以请保证你的 <code>vue-cli</code> 的版本在 <code>4.5.13</code> 以上，你可以通过以下的方式来查看你的 <code>vue-cli</code> 版本：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">vue -V</span>
<span class="line">------</span>
<span class="line">@vue/cli 4.5.13 // 输出版本号</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你需要升级版本，那么可以通过以下指令进行升级：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">npm update -g @vue/cli</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>具体的方式也可以点击 <a href="https://cli.vuejs.org/zh/guide/installation.html" target="_blank" rel="noopener noreferrer">这里</a> 进行参考。</p><p>升级之后，即可通过以下方式创建最新的 <code>vue3</code> 项目，终端输入 <code>vue create 项目名称</code> ，即可进入 <strong>模板选择</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">// 利用 vue-cli 创建项目</span></span>
<span class="line">vue create imooc<span class="token operator">-</span>admin</span>
<span class="line"><span class="token comment">// 进入模板选择</span></span>
<span class="line">Vue <span class="token constant">CLI</span> v4<span class="token punctuation">.</span><span class="token number">5.13</span></span>
<span class="line"><span class="token operator">?</span> Please pick a preset<span class="token operator">:</span></span>
<span class="line">  <span class="token function">Default</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>Vue <span class="token number">2</span><span class="token punctuation">]</span> babel<span class="token punctuation">,</span> eslint<span class="token punctuation">)</span></span>
<span class="line">  <span class="token function">Default</span> <span class="token punctuation">(</span>Vue <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>Vue <span class="token number">3</span><span class="token punctuation">]</span> babel<span class="token punctuation">,</span> eslint<span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">&gt;</span> Manually select features  <span class="token comment">// 选择手动配置</span></span>
<span class="line"><span class="token comment">// ----------------------------------------------------------</span></span>
<span class="line"><span class="token operator">?</span> Check the features needed <span class="token keyword">for</span> your project<span class="token operator">:</span></span>
<span class="line"> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> Choose Vue version <span class="token comment">// 选择 vue 版本</span></span>
<span class="line"> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> Babel <span class="token comment">// 使用 babel</span></span>
<span class="line"> <span class="token punctuation">(</span> <span class="token punctuation">)</span> TypeScript <span class="token comment">// 不使用 ts</span></span>
<span class="line"> <span class="token punctuation">(</span> <span class="token punctuation">)</span> Progressive Web <span class="token function">App</span> <span class="token punctuation">(</span><span class="token constant">PWA</span><span class="token punctuation">)</span> Support <span class="token comment">// 不使用 PWA</span></span>
<span class="line"> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> Router <span class="token comment">// 添加 vue-router</span></span>
<span class="line"> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> Vuex <span class="token comment">// 添加 vuex</span></span>
<span class="line"><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token constant">CSS</span> Pre<span class="token operator">-</span>processors <span class="token comment">// 使用 css 预处理器</span></span>
<span class="line"> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> Linter <span class="token operator">/</span> Formatter <span class="token comment">// 代码格式化</span></span>
<span class="line"> <span class="token punctuation">(</span> <span class="token punctuation">)</span> Unit Testing <span class="token comment">// 不配置测试</span></span>
<span class="line"> <span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token constant">E2E</span> Testing  <span class="token comment">// // 不配置测试</span></span>
<span class="line"><span class="token comment">// ----------------------------------------------------------</span></span>
<span class="line"> Choose a version <span class="token keyword">of</span> Vue<span class="token punctuation">.</span>js that you want to start the project <span class="token keyword">with</span></span>
<span class="line">  <span class="token number">2</span><span class="token punctuation">.</span>x</span>
<span class="line"><span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">.</span>x <span class="token comment">// 选择 vue 3.0 版本</span></span>
<span class="line"><span class="token comment">// ----------------------------------------------------------</span></span>
<span class="line"> Use history mode <span class="token keyword">for</span> router<span class="token operator">?</span> <span class="token punctuation">(</span>Requires proper server setup <span class="token keyword">for</span> index fallback <span class="token keyword">in</span> production<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">Y</span><span class="token operator">/</span>n<span class="token punctuation">)</span> n <span class="token comment">// 不使用 history模式 的路由</span></span>
<span class="line"><span class="token comment">// ----------------------------------------------------------</span></span>
<span class="line"> <span class="token operator">?</span> Pick a <span class="token constant">CSS</span> pre<span class="token operator">-</span><span class="token function">processor</span> <span class="token punctuation">(</span>PostCSS<span class="token punctuation">,</span> Autoprefixer and <span class="token constant">CSS</span> Modules are supported by <span class="token keyword">default</span><span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line"><span class="token operator">&gt;</span> Sass<span class="token operator">/</span><span class="token constant">SCSS</span> <span class="token punctuation">(</span><span class="token keyword">with</span> dart<span class="token operator">-</span>sass<span class="token punctuation">)</span> <span class="token comment">// 使用基于 dart-sass 的 scss 预处理器</span></span>
<span class="line">  Sass<span class="token operator">/</span><span class="token constant">SCSS</span> <span class="token punctuation">(</span><span class="token keyword">with</span> node<span class="token operator">-</span>sass<span class="token punctuation">)</span></span>
<span class="line">  Less</span>
<span class="line">  Stylus</span>
<span class="line"><span class="token comment">// ----------------------------------------------------------</span></span>
<span class="line"><span class="token operator">?</span> Pick a linter <span class="token operator">/</span> formatter config<span class="token operator">:</span></span>
<span class="line">  ESLint <span class="token keyword">with</span> error prevention only</span>
<span class="line">  ESLint <span class="token operator">+</span> Airbnb config</span>
<span class="line"><span class="token operator">&gt;</span> ESLint <span class="token operator">+</span> Standard config <span class="token comment">// 使用 ESLint 标准代码格式化方案</span></span>
<span class="line">  ESLint <span class="token operator">+</span> Prettier</span>
<span class="line"><span class="token comment">// ----------------------------------------------------------</span></span>
<span class="line"><span class="token operator">?</span> Pick additional lint features<span class="token operator">:</span></span>
<span class="line"> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> Lint on save <span class="token comment">//</span></span>
<span class="line"><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> Lint and fix on commit  <span class="token comment">// 保存时 &amp;&amp; 提交时，都进行 lint</span></span>
<span class="line"><span class="token comment">// ----------------------------------------------------------</span></span>
<span class="line"><span class="token operator">?</span> Where <span class="token keyword">do</span> you prefer placing config <span class="token keyword">for</span> Babel<span class="token punctuation">,</span> ESLint<span class="token punctuation">,</span> etc<span class="token punctuation">.</span><span class="token operator">?</span> <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">&gt;</span> In dedicated config files <span class="token comment">// 单独的配置文件</span></span>
<span class="line">  In <span class="token keyword">package</span><span class="token punctuation">.</span>json</span>
<span class="line"><span class="token comment">// ----------------------------------------------------------</span></span>
<span class="line"> Save <span class="token keyword">this</span> <span class="token keyword">as</span> a preset <span class="token keyword">for</span> future projects<span class="token operator">?</span> <span class="token punctuation">(</span>y<span class="token operator">/</span><span class="token constant">N</span><span class="token punctuation">)</span> n <span class="token comment">// 不存储预设</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>等待片刻之后，你的项目就会生成成功。 生成之后，可以通过以下两个指令来运行你的项目：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">cd 项目目录</span>
<span class="line">npm run serve</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>执行成功之后，项目即可运行！</p><h2 id="_3、大厂编程规范一-代码检测工具-eslint-你了解多少" tabindex="-1"><a class="header-anchor" href="#_3、大厂编程规范一-代码检测工具-eslint-你了解多少"><span>3、大厂编程规范一：代码检测工具 ESLint 你了解多少？</span></a></h2><p>在我们去创建项目的时候，脚手架工具已经帮助我们安装了 <code>ESLint</code> 代码检测工具。 对于 <code>ESLint</code> 的大名，同学们或多或少的应该都听说过，只不过有些同学可能了解的多一些，有些同学了解的少一些。 那么本小节我们就先来聊一下，这个赫赫有名的代码检测工具 <code>ESLint</code> 首先 <code>ESLint</code> 是 <code>2013年6月</code> 创建的一个开源项目，它的目标非常简单，只有一个，那就是 <strong>提供一个插件化的 <code>javascript</code> 代码检测工具</strong> ，说白了就是做 <strong>代码格式检测使用的</strong> 在咱们当前的项目中，包含一个 <code>.eslintrc.js</code> 文件，这个文件就是 <code>eslint</code> 的配置文件。 随着大家对代码格式的规范性越来越重视，<code>eslint</code> 也逐渐被更多的人所接收，同时也有很多大厂在原有的 <code>eslint</code> 规则基础之上进行了一些延伸。 我们在创建项目时，就进行过这样的选择：</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">?</span> Pick a linter <span class="token operator">/</span> formatter config<span class="token operator">:</span></span>
<span class="line">  ESLint <span class="token keyword">with</span> error prevention only <span class="token comment">// 仅包含错误的 ESLint</span></span>
<span class="line">  ESLint <span class="token operator">+</span> Airbnb config <span class="token comment">// Airbnb 的 ESLint 延伸规则</span></span>
<span class="line">  ESLint <span class="token operator">+</span> Standard config <span class="token comment">// 标准的 ESLint 规则</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们当前选择了 <strong>标准的 ESLint 规则</strong> ，那么接下来我们就在该规则之下，看一看 <code>ESLint</code> 它的一些配置都有什么？ 打开项目中的 <code>.eslintrc.js</code> 文件</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">// ESLint 配置文件遵循 commonJS 的导出规则，所导出的对象就是 ESLint 的配置对象</span></span>
<span class="line"><span class="token comment">// 文档：https://eslint.bootcss.com/docs/user-guide/configuring</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 表示当前目录即为根目录，ESLint 规则将被限制到该目录下</span></span>
<span class="line">  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// env 表示启用 ESLint 检测的环境</span></span>
<span class="line">  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 在 node 环境下启动 ESLint 检测</span></span>
<span class="line">    <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// ESLint 中基础配置需要继承的配置</span></span>
<span class="line">  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;plugin:vue/vue3-essential&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;@vue/standard&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 解析器</span></span>
<span class="line">  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&#39;babel-eslint&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 需要修改的启用规则及其各自的错误级别</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * 错误级别分为三种：</span>
<span class="line">   * &quot;off&quot; 或 0 - 关闭规则</span>
<span class="line">   * &quot;warn&quot; 或 1 - 开启规则，使用警告级别的错误：warn (不会导致程序退出)</span>
<span class="line">   * &quot;error&quot; 或 2 - 开启规则，使用错误级别的错误：error (当被触发的时候，程序会退出)</span>
<span class="line">   */</span></span>
<span class="line">  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&#39;no-console&#39;</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;production&#39;</span> <span class="token operator">?</span> <span class="token string">&#39;warn&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-property property">&#39;no-debugger&#39;</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;production&#39;</span> <span class="token operator">?</span> <span class="token string">&#39;warn&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;off&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>那么到这里咱们已经大致的了解了<code>.eslintrc.js</code> 文件，基于 <code>ESLint</code> 如果我们出现不符合规范的代码格式时，那么就会得到一个对应的错误。 比如：</p><blockquote><p>我们可以把 <code>Home.vue</code> 中的 <code>name</code> 属性值，由单引号改为双引号 此时，只要我们一保存代码，那么就会得到一个对应的错误 <img src="/standard/images/rules_base_why_3.png" style="zoom:67%;"> 这个错误表示：</p></blockquote><ol><li>此时我们触发了一个 《错误级别的错误》</li><li>触发该错误的位置是 在 <code>Home.vue</code> 的第 13 行 第九列 中</li><li>错误描述为：字符串必须使用单引号</li><li>错误规则为：<code>quotes</code> 那么想要解决这个错误，通常情况下我们有两种方式：</li><li>按照 <code>ESLint</code> 的要求修改代码</li><li>修改 <code>ESLint</code> 的验证规则 <strong>按照 <code>ESLint</code> 的要求修改代码：</strong><blockquote><p>在 <code>Home.vue</code> 的第 13 行中把双引号改为单引号 <strong>修改 <code>ESLint</code> 的验证规则：</strong></p></blockquote></li><li>在 <code>.eslintrc.js</code> 文件中，新增一条验证规则<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line"><span class="token property">&quot;quotes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span> <span class="token comment">// 默认</span></span>
<span class="line"><span class="token property">&quot;quotes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;warn&quot;</span> <span class="token comment">// 修改为警告</span></span>
<span class="line"><span class="token property">&quot;quotes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span> <span class="token comment">// 修改不校验</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>那么这一小节，我们了解了 <code>vue-cli</code> 创建 <code>vue3</code> 项目时，<code>Standard config</code> 的 <code>ESLint</code> 配置，并且知道了如何解决 <code>ESLint</code> 报错的问题。</p><p>但是一个团队中，人员的水平高低不齐，大量的 <code>ESLint</code> 规则校验，会让很多的开发者头疼不已，从而大大影响了项目的开发进度。</p><p>试想一下，在你去完成项目代码的同时，还需要时时刻刻注意代码的格式问题，这将是一件多么痛苦的事情！</p><p>那么有没有什么办法，既可以保证 <code>ESLint</code> 规则校验，又可以解决严苛的格式规则导致的影响项目进度的问题呢？</p><p>欲知后事如何，请听下一节《<code>Prettier</code> ，让你的代码变得更漂亮！》</p><h2 id="_5、大厂编程规范二-你知道代码格式化-prettier-吗" tabindex="-1"><a class="header-anchor" href="#_5、大厂编程规范二-你知道代码格式化-prettier-吗"><span>5、大厂编程规范二：你知道代码格式化 Prettier 吗？</span></a></h2><p>在上一小节中，我们知道了 <code>ESLint</code> 可以让我们的代码格式变得更加规范，但是同样的它也会带来开发时编码复杂度上升的问题。</p><p>那么有没有办法既可以保证 <code>ESLint</code> 规则校验，又可以让开发者无需关注格式问题来进行顺畅的开发呢？</p><p>答案是：有的！</p><p>而解决这个问题的关键就是 <code>prettier</code>！（点击 <a href="https://www.prettier.cn/" target="_blank" rel="noopener noreferrer">这里</a> 进入 <code>prettier</code> 中文官网！）</p><p><strong><code>prettier</code> 是什么？</strong></p><ol><li>一个代码格式化工具</li><li>开箱即用</li><li>可以直接集成到 <code>VSCode</code> 之中</li><li>在保存时，让代码直接符合 <code>ESLint</code> 标准（需要通过一些简单配置）</li></ol><p>那么这些简单配置具体指的是什么呢？</p><p>请看下一小节《ESLint 与 Prettier 配合解决代码格式问题》</p><h2 id="_6、eslint-与-prettier-配合解决代码格式问题" tabindex="-1"><a class="header-anchor" href="#_6、eslint-与-prettier-配合解决代码格式问题"><span>6、ESLint 与 Prettier 配合解决代码格式问题</span></a></h2><p>在上一小节中，我们提到《<code>prettier</code> 可以在保存代码时，让我们的代码直接符合 <code>ESLint</code> 标准》但是想要实现这样的功能需要进行一些配置。</p><p>那么这一小节，我们就来去完成这个功能：</p><p>下面以 <code>VSCode</code> 为例</p><ol><li><p>在 <code>VSCode</code> 中安装 <code>prettier</code> 插件（搜索 <code>prettier</code>），这个插件可以帮助我们在配置 <code>prettier</code> 的时候获得提示 <img src="/standard/images/rules_base_why_4.png" style="zoom:50%;"></p></li><li><p>在项目中新建 <code>.prettierrc</code> 文件，该文件为 <code>perttier</code> 默认配置文件</p></li><li><p>在该文件中写入如下配置：</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 不尾随分号</span></span>
<span class="line">  <span class="token property">&quot;semi&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 使用单引号</span></span>
<span class="line">  <span class="token property">&quot;singleQuote&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 多行逗号分割的语法中，最后一行不加逗号</span></span>
<span class="line">  <span class="token property">&quot;trailingComma&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>打开 <code>VSCode</code> 《设置面板》 <img src="/standard/images/rules_base_why_5.png" style="zoom:67%;"></p></li><li><p>在设置中，搜索 <code>save</code> ，勾选 <code>Format On Save</code><img src="/standard/images/rules_base_why_6.png" style="zoom:67%;"></p></li></ol><p>至此，你即可在 <strong><code>VSCode</code> 保存时，自动格式化代码！</strong></p><p><strong>但是！</strong> 你只做到这样还不够！</p><blockquote><ol><li><p>VSCode 而言，默认一个 tab 等于 4 个空格，而 ESLint 希望一个 tab 为两个空格</p></li><li><p>如果大家的 VSCode 安装了多个代码格式化工具的化</p></li><li><p>ESLint 和 prettier 之间的冲突问题 我们尝试在 <code>Home.vue</code> 中写入一个 <code>created</code> 方法，写入完成之后，打开我们的控制台我们会发现，此时代码抛出了一个 <code>ESLint</code> 的错误</p></li></ol></blockquote><img src="/standard/images/rules_base_why_7.png" style="zoom:67%;"><p>这个错误的意思是说：<strong><code>created</code> 这个方法名和后面的小括号之间，应该有一个空格！</strong></p><p>但是当我们加入了这个空格之后，只要一保存代码，就会发现 <code>prettier</code> 会自动帮助我们去除掉这个空格。</p><p>那么此时的这个问题就是 <code>prettier</code> 和 <code>ESLint</code> 的冲突问题。</p><p>针对于这个问题我们想要解决也非常简单：</p><ol><li><p>打开 <code>.eslintrc.js</code> 配置文件</p></li><li><p>在 <code>rules</code> 规则下，新增一条规则</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="line">&#39;space-before-function-paren&#39;<span class="token operator">:</span> &#39;off&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>该规则表示关闭《方法名后增加空格》的规则</p></li><li><p>重启项目</p></li></ol><p>至此我们整个的 <code>perttier</code> 和 <code>ESLint</code> 的配合使用就算是全部完成了。</p><p>在之后我们写代码的过程中，只需要保存代码，那么 <code>perttier</code> 就会帮助我们自动格式化代码，使其符合 <code>ESLint</code> 的校验规则。而无需我们手动进行更改了。</p><h2 id="_7、大厂编程规范三-约定式提交规范" tabindex="-1"><a class="header-anchor" href="#_7、大厂编程规范三-约定式提交规范"><span>7、大厂编程规范三：约定式提交规范</span></a></h2><p>在前面我们通过 <code>prettier + ESLint</code> 解决了代码格式的问题，但是我们之前也说过 <strong>编程规范</strong> 指的可不仅仅只是 <strong>代码格式规范</strong> 。</p><p>除了 <strong>代码格式规范</strong> 之外，还有另外一个很重要的规范就是 <strong><code>git</code> 提交规范！</strong></p><p>在现在的项目开发中，通常情况下，我们都会通过 <code>git</code> 来管理项目。只要通过 <code>git</code> 来管理项目，那么就必然会遇到使用 <code>git</code> 提交代码的场景</p><p>当我们执行 <code>git commit -m &quot;描述信息&quot;</code> 的时候，我们知道此时必须添加一个描述信息。但是中华文化博大精深，不同的人去填写描述信息的时候，都会根据自己的理解来进行描述。</p><p>而很多人的描述 “天马行空” ，这样就会导致别人在看你的提交记录时，看不懂你说的什么意思？不知道你当前的这次提交到底做了什么事情？会不会存在潜在的风险？</p><p>比如说，我们来看这几条提交记录：</p><p><img src="/standard/images/rules_base_why_8.png" alt="image-20210904203051754"></p><p>你能够想象得到它们经历了什么吗？</p><p>所以 <strong><code>git</code> 提交规范</strong> 势在必行。</p><p>对于 <strong><code>git</code> 提交规范</strong> 来说，不同的团队可能会有不同的标准，那么咱们今天就以目前使用较多的 <a href="https://github.com/angular/angular.js/blob/master/DEVELOPERS.md#-git-commit-guidelines" target="_blank" rel="noopener noreferrer">Angular 团队规范</a> 延伸出的 <a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" target="_blank" rel="noopener noreferrer">Conventional Commits specification（约定式提交）</a> 为例，来为大家详解 <strong><code>git</code> 提交规范</strong></p><p>约定式提交规范要求如下：</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token punctuation">[</span>optional scope<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">[</span>optional body<span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">[</span>optional <span class="token function">footer</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>  翻译 <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></span>
<span class="line"><span class="token operator">&lt;</span>类型<span class="token operator">&gt;</span><span class="token punctuation">[</span>可选 范围<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token operator">&lt;</span>描述<span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">[</span>可选 正文<span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">[</span>可选 脚注<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中 <code>&lt;type&gt;</code> 类型，必须是一个可选的值，比如：</p><ol><li>新功能：<code>feat</code></li><li>修复：<code>fix</code></li><li>文档变更：<code>docs</code></li><li>....</li></ol><p>那么如果有马虎的同事，没有按照规范来，直接就提交了怎么办呢？</p><p>那么有没有方式来限制这种错误的出现呢？</p><p>答案是有的！</p><p>下一节我们来看 《什么是 Git Hooks》</p><h2 id="_8、什么是-git-hooks" tabindex="-1"><a class="header-anchor" href="#_8、什么是-git-hooks"><span>8、什么是 Git Hooks</span></a></h2><p>上一小节中我们使用了 <code>git cz</code> 来代替了 <code>git commit</code> 实现了规范化的提交诉求，但是依然存在着有人会忘记使用的问题。</p><p>那么这一小节我们就来看一下这样的问题，我们应该如何去进行解决。</p><p>先来明确一下我们最终要实现的效果：</p><blockquote><p>我们希望：</p><p>当《提交描述信息》不符合 <a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" target="_blank" rel="noopener noreferrer">约定式提交规范</a> 的时候，阻止当前的提交，并抛出对应的错误提示 而要实现这个目的，我们就需要先来了解一个概念，叫做 <code>Git hooks（git 钩子 || git 回调方法）</code></p></blockquote><p>也就是：<strong><code>git</code> 在执行某个事件之前或之后进行一些其他额外的操作</strong></p><p>而我们所期望的 <strong>阻止不合规的提交消息</strong>，那么就需要使用到 <code>hooks</code> 的钩子函数。</p><p>下面是我整理出来的所有的 <code>hooks</code> ，大家可以进行一下参考，其中加粗的是常用到的 <code>hooks</code>：</p><table><thead><tr><th style="text-align:left;">Git Hook</th><th>调用时机</th><th>说明</th></tr></thead><tbody><tr><td style="text-align:left;">pre-applypatch</td><td><code>git am</code>执行前</td><td></td></tr><tr><td style="text-align:left;">applypatch-msg</td><td><code>git am</code>执行前</td><td></td></tr><tr><td style="text-align:left;">post-applypatch</td><td><code>git am</code>执行后</td><td>不影响<code>git am</code>的结果</td></tr><tr><td style="text-align:left;"><strong>pre-commit</strong></td><td><code>git commit</code>执行前</td><td>可以用<code>git commit --no-verify</code>绕过</td></tr><tr><td style="text-align:left;"><strong>commit-msg</strong></td><td><code>git commit</code>执行前</td><td>可以用<code>git commit --no-verify</code>绕过</td></tr><tr><td style="text-align:left;">post-commit</td><td><code>git commit</code>执行后</td><td>不影响<code>git commit</code>的结果</td></tr><tr><td style="text-align:left;">pre-merge-commit</td><td><code>git merge</code>执行前</td><td>可以用<code>git merge --no-verify</code>绕过。</td></tr><tr><td style="text-align:left;">prepare-commit-msg</td><td><code>git commit</code>执行后，编辑器打开之前</td><td></td></tr><tr><td style="text-align:left;">pre-rebase</td><td><code>git rebase</code>执行前</td><td></td></tr><tr><td style="text-align:left;">post-checkout</td><td><code>git checkout</code>或<code>git switch</code>执行后</td><td>如果不使用<code>--no-checkout</code>参数，则在<code>git clone</code>之后也会执行。</td></tr><tr><td style="text-align:left;">post-merge</td><td><code>git commit</code>执行后</td><td>在执行<code>git pull</code>时也会被调用</td></tr><tr><td style="text-align:left;">pre-push</td><td><code>git push</code>执行前</td><td></td></tr><tr><td style="text-align:left;">pre-receive</td><td><code>git-receive-pack</code>执行前</td><td></td></tr><tr><td style="text-align:left;">update</td><td></td><td></td></tr><tr><td style="text-align:left;">post-receive</td><td><code>git-receive-pack</code>执行后</td><td>不影响<code>git-receive-pack</code>的结果</td></tr><tr><td style="text-align:left;">post-update</td><td>当 <code>git-receive-pack</code>对 <code>git push</code> 作出反应并更新仓库中的引用时</td><td></td></tr><tr><td style="text-align:left;">push-to-checkout</td><td>当``git-receive-pack<code>对</code>git push<code>做出反应并更新仓库中的引用时，以及当推送试图更新当前被签出的分支且</code>receive.denyCurrentBranch<code>配置被设置为</code>updateInstead`时</td><td></td></tr><tr><td style="text-align:left;">pre-auto-gc</td><td><code>git gc --auto</code>执行前</td><td></td></tr><tr><td style="text-align:left;">post-rewrite</td><td>执行<code>git commit --amend</code>或<code>git rebase</code>时</td><td></td></tr><tr><td style="text-align:left;">sendemail-validate</td><td><code>git send-email</code>执行前</td><td></td></tr><tr><td style="text-align:left;">fsmonitor-watchman</td><td>配置<code>core.fsmonitor</code>被设置为<code>.git/hooks/fsmonitor-watchman</code>或<code>.git/hooks/fsmonitor-watchmanv2</code>时</td><td></td></tr><tr><td style="text-align:left;">p4-pre-submit</td><td><code>git-p4 submit</code>执行前</td><td>可以用<code>git-p4 submit --no-verify</code>绕过</td></tr><tr><td style="text-align:left;">p4-prepare-changelist</td><td><code>git-p4 submit</code>执行后，编辑器启动前</td><td>可以用<code>git-p4 submit --no-verify</code>绕过</td></tr><tr><td style="text-align:left;">p4-changelist</td><td><code>git-p4 submit</code>执行并编辑完<code>changelist message</code>后</td><td>可以用<code>git-p4 submit --no-verify</code>绕过</td></tr><tr><td style="text-align:left;">p4-post-changelist</td><td><code>git-p4 submit</code>执行后</td><td></td></tr><tr><td style="text-align:left;">post-index-change</td><td>索引被写入到<code>read-cache.c do_write_locked_index</code>后</td><td></td></tr></tbody></table><p>PS：详细的 <code>HOOKS介绍</code> 可点击<a href="https://git-scm.com/docs/githooks" target="_blank" rel="noopener noreferrer">这里</a>查看</p><p>整体的 <code>hooks</code> 非常多，当时我们其中用的比较多的其实只有两个：</p><table><thead><tr><th style="text-align:left;">Git Hook</th><th>调用时机</th><th>说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>pre-commit</strong></td><td><code>git commit</code>执行前<br>它不接受任何参数，并且在获取提交日志消息并进行提交之前被调用。脚本<code>git commit</code>以非零状态退出会导致命令在创建提交之前中止。</td><td>可以用<code>git commit --no-verify</code>绕过</td></tr><tr><td style="text-align:left;"><strong>commit-msg</strong></td><td><code>git commit</code>执行前<br>可用于将消息规范化为某种项目标准格式。<br>还可用于在检查消息文件后拒绝提交。</td><td>可以用<code>git commit --no-verify</code>绕过</td></tr></tbody></table><p>简单来说这两个钩子：</p><ol><li><code>commit-msg</code>：可以用来规范化标准格式，并且可以按需指定是否要拒绝本次提交</li><li><code>pre-commit</code>：会在提交前被调用，并且可以按需指定是否要拒绝本次提交</li></ol><p>而我们接下来要做的关键，就在这两个钩子上面。</p><h2 id="_9、使用-husky-commitlint-检查提交描述是否符合规范要求" tabindex="-1"><a class="header-anchor" href="#_9、使用-husky-commitlint-检查提交描述是否符合规范要求"><span>9、使用 husky + commitlint 检查提交描述是否符合规范要求</span></a></h2><p>在上一小节中，我们了解了 <code>git hooks</code> 的概念，那么接下来我们就使用 <code>git hooks</code> 来去校验我们的提交信息。</p><p>要完成这么个目标，那么我们需要使用两个工具：</p><ol><li><p><a href="https://github.com/conventional-changelog/commitlint" target="_blank" rel="noopener noreferrer">commitlint</a>：用于检查提交信息</p></li><li><p><a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">husky</a>：是<code>git hooks</code>工具</p></li></ol><p>注意：<strong><code>npm</code> 需要在 7.x 以上版本！！！！！</strong></p><p>那么下面我们分别来去安装一下这两个工具：</p><h3 id="commitlint" tabindex="-1"><a class="header-anchor" href="#commitlint"><span>commitlint</span></a></h3><ol><li><p>安装依赖：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">npm install --save-dev @commitlint/config-conventional@12.1.4 @commitlint/cli@12.1.4</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>创建 <code>commitlint.config.js</code> 文件</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">echo &quot;module.exports = {extends: [&#39;@commitlint/config-conventional&#39;]}&quot; &gt; commitlint.config.js</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>打开 <code>commitlint.config.js</code> ， 增加配置项（ <a href="https://github.com/conventional-changelog/commitlint/blob/master/@commitlint/config-conventional/index.js" target="_blank" rel="noopener noreferrer">config-conventional 默认配置点击可查看</a> ）：</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 继承的规则</span></span>
<span class="line">  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@commitlint/config-conventional&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 定义规则类型</span></span>
<span class="line">  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// type 类型定义，表示 git 提交的 type 必须在以下类型范围内</span></span>
<span class="line">    <span class="token string-property property">&#39;type-enum&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string">&#39;always&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">&#39;feat&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 新功能 feature</span></span>
<span class="line">        <span class="token string">&#39;fix&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 修复 bug</span></span>
<span class="line">        <span class="token string">&#39;docs&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 文档注释</span></span>
<span class="line">        <span class="token string">&#39;style&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 代码格式(不影响代码运行的变动)</span></span>
<span class="line">        <span class="token string">&#39;refactor&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 重构(既不增加新功能，也不是修复bug)</span></span>
<span class="line">        <span class="token string">&#39;perf&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 性能优化</span></span>
<span class="line">        <span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 增加测试</span></span>
<span class="line">        <span class="token string">&#39;chore&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 构建过程或辅助工具的变动</span></span>
<span class="line">        <span class="token string">&#39;revert&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 回退</span></span>
<span class="line">        <span class="token string">&#39;build&#39;</span> <span class="token comment">// 打包</span></span>
<span class="line">      <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token comment">// subject 大小写不做校验</span></span>
<span class="line">    <span class="token string-property property">&#39;subject-case&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p><strong>注意：确保保存为 <code>UTF-8</code> 的编码格式</strong>，否则可能会出现以下错误：</p><p><img src="/standard/images/rules_base_why_9.png" alt="image-20210710121456416"></p><p>接下来我们来安装 <code>husky</code></p><h3 id="husky" tabindex="-1"><a class="header-anchor" href="#husky"><span>husky</span></a></h3><ol><li><p>安装依赖：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">npm install husky@7.0.1 --save-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>启动 <code>hooks</code> ， 生成 <code>.husky</code> 文件夹</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">npx husky install</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="/standard/images/rules_base_why_10.png" alt="image-20210906202034156"></p></li><li><p>在 <code>package.json</code> 中生成 <code>prepare</code> 指令（ <strong>需要 npm &gt; 7.0 版本</strong> ）</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">npm set-script prepare &quot;husky install&quot;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="/standard/images/rules_base_why_11.png" style="zoom:50%;"></li><li><p>执行 <code>prepare</code> 指令</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">npm run prepare</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>执行成功，提示 <img src="/standard/images/rules_base_why_12.png" style="zoom:80%;"></p></li><li><p>添加 <code>commitlint</code> 的 <code>hook</code> 到 <code>husky</code>中，并指令在 <code>commit-msg</code> 的 <code>hooks</code> 下执行 <code>npx --no-install commitlint --edit &quot;$1&quot;</code> 指令</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">npx husky add .husky/commit-msg &#39;npx --no-install commitlint --edit &quot;$1&quot;&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>此时的 <code>.husky</code> 的文件结构 <img src="/standard/images/rules_base_why_13.png" alt="image-20210710120228931"></p></li></ol><p>至此， 不符合规范的 commit 将不再可提交：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">PS F:\xxxxxxxxxxxxxxxxxxxxx\imooc-admin&gt; git commit -m &quot;测试&quot;</span>
<span class="line">⧗   input: 测试</span>
<span class="line">✖   subject may not be empty [subject-empty]</span>
<span class="line">✖   type may not be empty [type-empty]</span>
<span class="line">✖   found 2 problems, 0 warnings</span>
<span class="line">ⓘ   Get help: https://github.com/conventional-changelog/commitlint/#what-is-commitlint</span>
<span class="line">husky - commit-msg hook exited with code 1 (error)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>那么至此，我们就已经可以处理好了 <strong>强制规范化的提交要求</strong>，到现在 <strong>不符合规范的提交信息，将不可在被提交！</strong></p><p>那么到这里我们的 <strong>规范化目标</strong> 就完成了吗？</p><p>当然没有！</p><p>现在我们还缺少一个 <strong>规范化的处理</strong> ，那就是 <strong>代码格式提交规范处理！</strong></p><p>有同学看到这里可能说，咦！ 这个怎么看着这么眼熟啊？这个事情我们之前不是做过了吗？还需要在处理什么？</p><p>欲知后事如何，请看下一节《通过 pre-commit 处理提交时代码规范》</p><h2 id="_10、通过-pre-commit-检测提交时代码规范" tabindex="-1"><a class="header-anchor" href="#_10、通过-pre-commit-检测提交时代码规范"><span>10、通过 pre-commit 检测提交时代码规范</span></a></h2><p>在 <strong><code>ESLint</code> 与 <code>Prettier</code> 配合解决代码格式问题</strong> 的章节中，我们讲解了如何处理 <strong>本地！代码格式问题。</strong></p><p>但是这样的一个格式处理问题，他只能够在本地进行处理，并且我们还需要 <strong>手动在 <code>VSCode</code> 中配置自动保存</strong> 才可以。那么这样就会存在一个问题，要是有人忘记配置这个东西了怎么办呢？他把代码写的乱七八糟的直接就提交了怎么办呢？</p><p>所以我们就需要有一种方式来规避这种风险。</p><p>那么想要完成这么一个操作就需要使用 <code>husky</code> 配合 <code>eslint</code> 才可以实现。</p><p>我们期望通过 <strong><code>husky</code> 监测 <code>pre-commit</code> 钩子，在该钩子下执行 <code>npx eslint --ext .js,.vue src</code></strong> 指令来去进行相关检测：</p><ol><li><p>执行 <code>npx husky add .husky/pre-commit &quot;npx eslint --ext .js,.vue src&quot;</code> 添加 <code>commit</code> 时的 <code>hook</code> （<code>npx eslint --ext .js,.vue src</code> 会在执行到该 hook 时运行）</p></li><li><p>该操作会生成对应文件 <code>pre-commit</code>： <img src="/standard/images/rules_base_why_14.png" alt="image-20210906204043915"></p></li><li><p>关闭 <code>VSCode</code> 的自动保存操作</p></li><li><p>修改一处代码，使其不符合 <code>ESLint</code> 校验规则</p></li><li><p>执行 <strong>提交操作</strong> 会发现，抛出一系列的错误，代码无法提交</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">PS F:\xxxxxxxxxxxxxxxxxxx\imooc-admin&gt; git commit -m &#39;test&#39;</span>
<span class="line">F:\xxxxxxxxxxxxxxxx\imooc-admin\src\views\Home.vue</span>
<span class="line">  13:9  error  Strings must use singlequote  quotes</span>
<span class="line">✖ 1 problem (1 error, 0 warnings)</span>
<span class="line">  1 error and 0 warnings potentially fixable with the `--fix` option.</span>
<span class="line">husky - pre-commit hook exited with code 1 (error)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><ol start="6"><li>想要提交代码，必须处理完成所有的错误信息</li></ol><p>那么到这里位置，我们已经通过 <code>pre-commit</code> 检测到了代码的提交规范问题。</p><p>那么到这里就万事大吉了吗？</p><p>在这个世界上从来不缺的就是懒人，错误的代码格式可能会抛出很多的 <code>ESLint</code> 错误，让人看得头皮发麻。严重影响程序猿的幸福指数。</p><p>那么有没有办法，让程序猿在 0 配置的前提下，哪怕代码格式再乱，也可以 <strong>”自动“</strong> 帮助他修复对应的问题，并且完成提交呢？</p><p>你别说，还真有！</p><p>那么咱们来看下一节《lint-staged 自动修复格式错误》</p><h2 id="_11、lint-staged-自动修复格式错误" tabindex="-1"><a class="header-anchor" href="#_11、lint-staged-自动修复格式错误"><span>11、lint-staged 自动修复格式错误</span></a></h2><p>在上一章中我们通过 <code>pre-commit</code> 处理了 <strong>检测代码的提交规范问题，当我们进行代码提交时，会检测所有的代码格式规范</strong> 。</p><p>但是这样会存在两个问题：</p><ol><li>我们只修改了个别的文件，没有必要检测所有的文件代码格式</li><li>它只能给我们提示出对应的错误，我们还需要手动的进行代码修改</li></ol><p>那么这一小节，我们就需要处理这两个问题</p><p>那么想要处理这两个问题，就需要使用另外一个插件 <a href="https://github.com/okonet/lint-staged" target="_blank" rel="noopener noreferrer">lint-staged</a> ！</p><p><a href="https://github.com/okonet/lint-staged" target="_blank" rel="noopener noreferrer">lint-staged</a> 可以让你当前的代码检查 <strong>只检查本次修改更新的代码，并在出现错误的时候，自动修复并且推送</strong></p><p><a href="https://github.com/okonet/lint-staged" target="_blank" rel="noopener noreferrer">lint-staged</a> 无需单独安装，我们生成项目时，<code>vue-cli</code> 已经帮助我们安装过了，所以我们直接使用就可以了</p><ol><li><p>修改 <code>package.json</code> 配置</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token string-property property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;src/**/*.{js,vue}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">&quot;eslint --fix&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string">&quot;git add&quot;</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>如上配置，每次它只会在你本地 <code>commit</code> 之前，校验你提交的内容是否符合你本地配置的 <code>eslint</code>规则(这个见文档 <a href="https://panjiachen.github.io/vue-element-admin-site/zh/guide/advanced/eslint.html" target="_blank" rel="noopener noreferrer">ESLint</a> )，校验会出现两种结果：</p><ol><li>如果符合规则：则会提交成功。</li><li>如果不符合规则：它会自动执行 <code>eslint --fix</code> 尝试帮你自动修复，如果修复成功则会帮你把修复好的代码提交，如果失败，则会提示你错误，让你修好这个错误之后才能允许你提交代码。</li></ol></li><li><p>修改 <code>.husky/pre-commit</code> 文件</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token hashbang comment">#!/bin/sh</span></span>
<span class="line"><span class="token punctuation">.</span> <span class="token string">&quot;$(dirname &quot;</span>$0<span class="token string">&quot;)/_/husky.sh&quot;</span></span>
<span class="line">npx lint<span class="token operator">-</span>staged</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>再次执行提交代码</p></li><li><p>发现 <strong>暂存区中</strong> 不符合 <code>ESlint</code> 的内容，被自动修复</p></li></ol><h2 id="_12、总结" tabindex="-1"><a class="header-anchor" href="#_12、总结"><span>12、总结</span></a></h2><p>本章中我们处理了 <strong>编程格式规范的问题</strong>，整个规范大体可以分为两大类：</p><ol><li>代码格式规范</li><li><code>git</code> 提交规范</li></ol><p><strong>代码格式规范：</strong></p><p>对于 <strong>代码格式规范</strong> 而言，我们通过 <code>ESLint</code> + <code>Prettier</code> + <code>VSCode 配置</code> 配合进行了处理。</p><p>最终达到了在保存代码时，自动规范化代码格式的目的。</p><p><strong><code>git</code> 提交规范：</strong></p><p>对于 <strong><code>git</code> 提交规范</strong> 而言我们使用了 <code>husky</code> 来监测 <code>Git hooks</code> 钩子，并且通过以下插件完成了对应的配置：</p><ol><li><a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" target="_blank" rel="noopener noreferrer">约定式提交规范</a></li><li><a href="https://github.com/conventional-changelog/commitlint" target="_blank" rel="noopener noreferrer">commitlint</a>：用于检查提交信息</li><li><code>pre-commit</code>： <code>git hooks</code> 钩子</li><li><a href="https://github.com/okonet/lint-staged" target="_blank" rel="noopener noreferrer">lint-staged</a>：只检查本次修改更新的代码，并在出现错误的时候，自动修复并且推送</li></ol></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: chenjie@szy.cn">chenjie</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script src="/standard/assets/js/runtime~app.06ec8f29.js" defer></script><script src="/standard/assets/js/904.c26e757c.js" defer></script><script src="/standard/assets/js/app.8f039463.js" defer></script>
  </body>
</html>
