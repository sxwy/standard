<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>版本管理 | standard</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="前端项目及编码规范">
    
    <link rel="preload" href="/standard/assets/css/0.styles.336f5e55.css" as="style"><link rel="preload" href="/standard/assets/js/app.6c4a3ccc.js" as="script"><link rel="preload" href="/standard/assets/js/2.0a7b656f.js" as="script"><link rel="preload" href="/standard/assets/js/1.d355022b.js" as="script"><link rel="preload" href="/standard/assets/js/31.d5827fcf.js" as="script"><link rel="prefetch" href="/standard/assets/js/10.baec7bff.js"><link rel="prefetch" href="/standard/assets/js/11.5bfe2f2e.js"><link rel="prefetch" href="/standard/assets/js/12.305f0fda.js"><link rel="prefetch" href="/standard/assets/js/13.c98462fe.js"><link rel="prefetch" href="/standard/assets/js/14.bd3c5f23.js"><link rel="prefetch" href="/standard/assets/js/15.744da8b1.js"><link rel="prefetch" href="/standard/assets/js/16.b2faa823.js"><link rel="prefetch" href="/standard/assets/js/17.13991897.js"><link rel="prefetch" href="/standard/assets/js/18.6d3b94c1.js"><link rel="prefetch" href="/standard/assets/js/19.f31d4cee.js"><link rel="prefetch" href="/standard/assets/js/20.f128975d.js"><link rel="prefetch" href="/standard/assets/js/21.47a2f90a.js"><link rel="prefetch" href="/standard/assets/js/22.ad7e4544.js"><link rel="prefetch" href="/standard/assets/js/23.d8c1013a.js"><link rel="prefetch" href="/standard/assets/js/24.e889b332.js"><link rel="prefetch" href="/standard/assets/js/25.fd9c47b6.js"><link rel="prefetch" href="/standard/assets/js/26.5457e303.js"><link rel="prefetch" href="/standard/assets/js/27.f3e68f3b.js"><link rel="prefetch" href="/standard/assets/js/28.0d7f6802.js"><link rel="prefetch" href="/standard/assets/js/29.c70bdf1a.js"><link rel="prefetch" href="/standard/assets/js/3.b145a27f.js"><link rel="prefetch" href="/standard/assets/js/30.fef48b3d.js"><link rel="prefetch" href="/standard/assets/js/4.84e1e480.js"><link rel="prefetch" href="/standard/assets/js/5.ec64afb2.js"><link rel="prefetch" href="/standard/assets/js/6.821ed025.js"><link rel="prefetch" href="/standard/assets/js/7.589debdf.js"><link rel="prefetch" href="/standard/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/standard/assets/css/0.styles.336f5e55.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/standard/" class="home-link router-link-active"><img src="/standard/images/logo.png" alt="standard" class="logo"> <span class="site-name can-hide">standard</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/standard/rules/base/why.html" class="nav-link">
  规范
</a></div><div class="nav-item"><a href="/standard/guide/project/combat.html" class="nav-link">
  教程
</a></div><div class="nav-item"><a href="https://github.com/sxwy/standard" target="_blank" rel="noopener noreferrer" class="nav-link external">
  源代码
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/standard/rules/base/why.html" class="nav-link">
  规范
</a></div><div class="nav-item"><a href="/standard/guide/project/combat.html" class="nav-link">
  教程
</a></div><div class="nav-item"><a href="https://github.com/sxwy/standard" target="_blank" rel="noopener noreferrer" class="nav-link external">
  源代码
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/standard/rules/base/why.html" class="sidebar-link">why</a></li><li><a href="/standard/rules/base/introduction.html" class="sidebar-link">介绍</a></li><li><a href="/standard/rules/base/installation.html" class="sidebar-link">安装</a></li><li><a href="/standard/rules/base/configuration.html" class="sidebar-link">配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>项目</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/standard/rules/project/structure.html" class="sidebar-link">项目结构</a></li><li><a href="/standard/rules/project/version.html" aria-current="page" class="active sidebar-link">版本管理</a></li><li><a href="/standard/rules/project/archive.html" class="sidebar-link">归档管理</a></li><li><a href="/standard/rules/project/template.html" class="sidebar-link">项目模板</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="版本管理"><a href="#版本管理" class="header-anchor">#</a> 版本管理</h1> <h2 id="约定式提交"><a href="#约定式提交" class="header-anchor">#</a> 约定式提交</h2> <blockquote><p>约定式提交规范是一种基于提交信息的轻量级约定，它提供了一组简单规则来创建清晰的提交历史，这更有利于编写自动化工具。通过在提交信息中描述功能、修复和破坏性变更，使这种惯例与<a href="https://semver.org/" target="_blank" rel="noopener noreferrer">语义化版本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>相互对应。 —— <a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" target="_blank" rel="noopener noreferrer">https://www.conventionalcommits.org/zh-hans/v1.0.0/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>提交信息结构如下所示：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;type&gt;[scope]: &lt;description&gt;

[body]

[footer(s)]
</code></pre></div><ul><li><p><code>type</code>：类型，主要使用 <code>fix</code> 和 <code>feat</code> 这两种类型，除了 <code>fix</code> 和 <code>feat</code> 外，我们主要遵循 <a href="https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines" target="_blank" rel="noopener noreferrer">Angular 约定<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><code>fix</code>：类型 为 fix 的提交表示在代码库中修复了一个 bug（这和语义化版本中的 PATCH 相对应）；</li> <li><code>feat</code>：类型 为 feat 的提交表示在代码库中新增了一个功能（这和语义化版本中的 MINOR 相对应）；</li> <li><code>docs</code>：只修改了文档</li> <li><code>style</code>：只修改了文档格式</li> <li><code>perf</code>：优化性能</li> <li><code>refactor</code>：重构代码</li> <li><code>test</code>：测试代码</li> <li><code>build</code>：构建或依赖相关的变更</li> <li><code>ci</code>：修改了 CI 配置</li> <li><code>revert:</code>：回滚代码</li></ul></li> <li><p><code>scope</code>：范围（可选），表示本次提交改动的范围（根据具体项目的模块划分而定）</p></li> <li><p><code>description</code>：描述，一句简洁的改动说明</p></li> <li><p><code>body</code>：正文（可选），通常用于解释说明改动的原因</p></li> <li><p><code>footer</code>：脚注（可选），一些额外的备注说明</p> <ul><li><code>BREAKING CHANGE:</code>：在脚注中包含 <code>BREAKING CHANGE:</code> 的提交，表示引入了破坏性 API 变更，这和语义化版本中的 MAJOR 相对应。破坏性的变更可能是 fix 或者 feat 类型的提交引起的，所以通过脚注的方式来表明。</li> <li><code>Reviewed-by:</code>：注明由谁 review</li> <li><code>Refs:</code>：注明关联的需求或者问题地址</li></ul></li></ul> <p>范例：</p> <ul><li><p>修复</p> <div class="language- extra-class"><pre class="language-text"><code>fix: prevent racing of requests
</code></pre></div></li> <li><p>功能</p> <div class="language- extra-class"><pre class="language-text"><code>feat(lang): add polish language
</code></pre></div></li> <li><p>破坏性变更</p> <div class="language- extra-class"><pre class="language-text"><code>feat: allow provided config object to extend other configs

BREAKING CHANGE: `extends` key in config file is now used for extending other config files
</code></pre></div></li></ul> <h2 id="分支工作流"><a href="#分支工作流" class="header-anchor">#</a> 分支工作流</h2> <p>Git 版本管理需要一个清晰的流程及规范，避免团队成员提交各式风格的 commit，使项目更容易维护。根据项目的业务属性可以划分为两种项目</p> <ul><li>业务项目</li> <li>技术项目</li></ul> <h3 id="业务项目"><a href="#业务项目" class="header-anchor">#</a> 业务项目</h3> <p><img src="/standard/images/rules_project_version_auto.svg" alt="auto.svg"></p> <div class="language- extra-class"><pre class="language-text"><code>- master：主分支，只能从其他分支合并，不能直接修改
- cicd_debug：联调分支
- cicd_test：测试分支
- cicd_rc：预发分支
- cicd_prod：生产分支
- feature/xxx：功能分支
- hotfix/xxx：线上问题修复分支
</code></pre></div><ul><li><p>新功能处理</p> <ol><li>从 master 分支切一个新的功能分支 feature/xxx；</li> <li>在 feature/xxx 提交功能变更 <code>feat: ...</code>；</li></ol></li> <li><p>部署测试环境：</p> <ol><li>将功能分支 feature/xxx 合并到测试分支 cicd_test；</li> <li>等待自动化部署（Gitlab CI 或 Jenkins）。</li></ol></li> <li><p>部署预发环境</p> <ol><li><p>基于 master 建立 release/x.y.z 分支；</p></li> <li><p>将功能分支 feature/xxx 合并到 release/x.y.z；</p></li> <li><p>修改版本说明文件（通常是 <code>./CHANGELOG.md</code>），增加新的版本修改说明；</p> <div class="language- extra-class"><pre class="language-text"><code>Vx.y.z
YYYY-MM-DD
1、增加功能 xxx（修改者 A）
2、修复功能 yyy（修改者 B）
</code></pre></div><p>ps：新版本号可以根据改动范围和大小来决定，详情参照上文的”约定式提交“规范。</p></li> <li><p>将 release/x.y.z 合并到 cicd_rc 分支；</p></li> <li><p>等待自动化部署（Gitlab CI 或 Jenkins）。</p></li></ol></li> <li><p>部署生产环境</p> <p>将 release/x.y.z 合并到 cicd_prod，等待自动化部署（Gitlab CI 或 Jenkins），然后通知运维部署容器服务即可。</p></li></ul> <p>ps：通过统一的 release 分支去处理发布，会然发布流程更加严谨且避免了重复的冲突处理操作（大多冲突在 release 分支处理掉了）。此外，在遇到多版本并行时，可以根据实际情况创建多个 release 分支。</p> <h3 id="技术项目"><a href="#技术项目" class="header-anchor">#</a> 技术项目</h3> <p><img src="/standard/images/rules_project_version_basic.svg" alt="basic.svg"></p> <h3 id="参考文献"><a href="#参考文献" class="header-anchor">#</a> 参考文献</h3> <ul><li><a href="https://www.ruanyifeng.com/blog/2015/12/git-workflow.html" target="_blank" rel="noopener noreferrer">Git 工作流程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/standard/rules/project/structure.html" class="prev">
        项目结构
      </a></span> <span class="next"><a href="/standard/rules/project/archive.html">
        归档管理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/standard/assets/js/app.6c4a3ccc.js" defer></script><script src="/standard/assets/js/2.0a7b656f.js" defer></script><script src="/standard/assets/js/1.d355022b.js" defer></script><script src="/standard/assets/js/31.d5827fcf.js" defer></script>
  </body>
</html>
