<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>版本管理 | 开发规范</title><meta name="description" content="前端项目及编码规范">
    <link rel="stylesheet" href="/standard/assets/css/styles.611303dc.css">
    <link rel="preload" href="/standard/assets/js/runtime~app.1a69b0ee.js" as="script"><link rel="preload" href="/standard/assets/css/styles.611303dc.css" as="style"><link rel="preload" href="/standard/assets/js/353.569cdd4c.js" as="script"><link rel="preload" href="/standard/assets/js/app.444c5af1.js" as="script">
    <link rel="prefetch" href="/standard/assets/js/why.html.ea91eb25.js" as="script"><link rel="prefetch" href="/standard/assets/js/structure.html.a621e500.js" as="script"><link rel="prefetch" href="/standard/assets/js/combat.html.3641255e.js" as="script"><link rel="prefetch" href="/standard/assets/js/version.html.6a656e21.js" as="script"><link rel="prefetch" href="/standard/assets/js/template.html.a5c820c8.js" as="script"><link rel="prefetch" href="/standard/assets/js/configuration.html.beef797e.js" as="script"><link rel="prefetch" href="/standard/assets/js/installation.html.15185a6f.js" as="script"><link rel="prefetch" href="/standard/assets/js/archive.html.02e51242.js" as="script"><link rel="prefetch" href="/standard/assets/js/introduction.html.0f3e8877.js" as="script"><link rel="prefetch" href="/standard/assets/js/index.html.17e9df2c.js" as="script"><link rel="prefetch" href="/standard/assets/js/404.html.154591f0.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/standard/"><img class="logo" src="/standard/images/logo.png" alt="开发规范"><span class="site-name can-hide" aria-hidden="true">开发规范</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link" href="/standard/rules/base/why.html" aria-label="规范"><!--[--><!--[--><!--]--> 规范 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/standard/guide/project/combat.html" aria-label="教程"><!--[--><!--[--><!--]--> 教程 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/sxwy/standard" rel="noopener noreferrer" target="_blank" aria-label="源代码"><!--[--><!--[--><!--]--> 源代码 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link" href="/standard/rules/base/why.html" aria-label="规范"><!--[--><!--[--><!--]--> 规范 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="route-link" href="/standard/guide/project/combat.html" aria-label="教程"><!--[--><!--[--><!--]--> 教程 <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/sxwy/standard" rel="noopener noreferrer" target="_blank" aria-label="源代码"><!--[--><!--[--><!--]--> 源代码 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">基础 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/standard/rules/base/why.html" aria-label="why"><!--[--><!--[--><!--]--> why <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/standard/rules/base/introduction.html" aria-label="介绍"><!--[--><!--[--><!--]--> 介绍 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/standard/rules/base/installation.html" aria-label="安装"><!--[--><!--[--><!--]--> 安装 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/standard/rules/base/configuration.html" aria-label="配置"><!--[--><!--[--><!--]--> 配置 <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">项目 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/standard/rules/project/structure.html" aria-label="项目结构"><!--[--><!--[--><!--]--> 项目结构 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active sidebar-item active" href="/standard/rules/project/version.html" aria-label="版本管理"><!--[--><!--[--><!--]--> 版本管理 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/standard/rules/project/archive.html" aria-label="归档管理"><!--[--><!--[--><!--]--> 归档管理 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/standard/rules/project/template.html" aria-label="项目模板"><!--[--><!--[--><!--]--> 项目模板 <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="版本管理" tabindex="-1"><a class="header-anchor" href="#版本管理"><span>版本管理</span></a></h1><h2 id="约定式提交" tabindex="-1"><a class="header-anchor" href="#约定式提交"><span>约定式提交</span></a></h2><blockquote><p>约定式提交规范是一种基于提交信息的轻量级约定，它提供了一组简单规则来创建清晰的提交历史，这更有利于编写自动化工具。通过在提交信息中描述功能、修复和破坏性变更，使这种惯例与<a href="https://semver.org/" target="_blank" rel="noopener noreferrer">语义化版本<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>相互对应。 —— <a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" target="_blank" rel="noopener noreferrer">https://www.conventionalcommits.org/zh-hans/v1.0.0/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>提交信息结构如下所示：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>&lt;type&gt;[scope]: &lt;description&gt;

[body]

[footer(s)]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>type</code>：类型，主要使用 <code>fix</code> 和 <code>feat</code> 这两种类型，除了 <code>fix</code> 和 <code>feat</code> 外，我们主要遵循 <a href="https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines" target="_blank" rel="noopener noreferrer">Angular 约定<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li><code>fix</code>：类型 为 fix 的提交表示在代码库中修复了一个 bug（这和语义化版本中的 PATCH 相对应）；</li><li><code>feat</code>：类型 为 feat 的提交表示在代码库中新增了一个功能（这和语义化版本中的 MINOR 相对应）；</li><li><code>docs</code>：只修改了文档</li><li><code>style</code>：只修改了文档格式</li><li><code>perf</code>：优化性能</li><li><code>refactor</code>：重构代码</li><li><code>test</code>：测试代码</li><li><code>build</code>：构建或依赖相关的变更</li><li><code>ci</code>：修改了 CI 配置</li><li><code>revert:</code>：回滚代码</li></ul></li><li><p><code>scope</code>：范围（可选），表示本次提交改动的范围（根据具体项目的模块划分而定）</p></li><li><p><code>description</code>：描述，一句简洁的改动说明</p></li><li><p><code>body</code>：正文（可选），通常用于解释说明改动的原因</p></li><li><p><code>footer</code>：脚注（可选），一些额外的备注说明</p><ul><li><code>BREAKING CHANGE:</code>：在脚注中包含 <code>BREAKING CHANGE:</code> 的提交，表示引入了破坏性 API 变更，这和语义化版本中的 MAJOR 相对应。破坏性的变更可能是 fix 或者 feat 类型的提交引起的，所以通过脚注的方式来表明。</li><li><code>Reviewed-by:</code>：注明由谁 review</li><li><code>Refs:</code>：注明关联的需求或者问题地址</li></ul></li></ul><p>范例：</p><ul><li><p>修复</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>fix: prevent racing of requests
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>功能</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>feat(lang): add polish language
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>破坏性变更</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>feat: allow provided config object to extend other configs

BREAKING CHANGE: `extends` key in config file is now used for extending other config files
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="分支工作流" tabindex="-1"><a class="header-anchor" href="#分支工作流"><span>分支工作流</span></a></h2><p>Git 版本管理需要一个清晰的流程及规范，避免团队成员提交各式风格的 commit，使项目更容易维护。根据项目的业务属性可以划分为两种项目</p><ul><li>业务项目</li><li>技术项目</li></ul><h3 id="业务项目" tabindex="-1"><a class="header-anchor" href="#业务项目"><span>业务项目</span></a></h3><p><img src="/standard/images/rules_project_version_auto.svg" alt="auto.svg"></p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>- master：主分支，只能从其他分支合并，不能直接修改
- cicd_debug：联调分支
- cicd_test：测试分支
- cicd_rc：预发分支
- cicd_prod：生产分支
- feature/xxx：功能分支
- hotfix/xxx：线上问题修复分支
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>新功能处理</p><ol><li>从 master 分支切一个新的功能分支 feature/xxx；</li><li>在 feature/xxx 提交功能变更 <code>feat: ...</code>；</li></ol></li><li><p>部署测试环境：</p><ol><li>将功能分支 feature/xxx 合并到测试分支 cicd_test；</li><li>等待自动化部署（Gitlab CI 或 Jenkins）。</li></ol></li><li><p>部署预发环境</p><ol><li><p>基于 master 建立 release/x.y.z 分支；</p></li><li><p>将功能分支 feature/xxx 合并到 release/x.y.z；</p></li><li><p>修改版本说明文件（通常是 <code>./CHANGELOG.md</code>），增加新的版本修改说明；</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>Vx.y.z
YYYY-MM-DD
1、增加功能 xxx（修改者 A）
2、修复功能 yyy（修改者 B）
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ps：新版本号可以根据改动范围和大小来决定，详情参照上文的”约定式提交“规范。</p></li><li><p>将 release/x.y.z 合并到 cicd_rc 分支；</p></li><li><p>等待自动化部署（Gitlab CI 或 Jenkins）。</p></li></ol></li><li><p>部署生产环境</p><p>将 release/x.y.z 合并到 cicd_prod，等待自动化部署（Gitlab CI 或 Jenkins），然后通知运维部署容器服务即可。</p></li></ul><p>ps：通过统一的 release 分支去处理发布，会然发布流程更加严谨且避免了重复的冲突处理操作（大多冲突在 release 分支处理掉了）。此外，在遇到多版本并行时，可以根据实际情况创建多个 release 分支。</p><h3 id="技术项目" tabindex="-1"><a class="header-anchor" href="#技术项目"><span>技术项目</span></a></h3><p><img src="/standard/images/rules_project_version_basic.svg" alt="basic.svg"></p><h3 id="参考文献" tabindex="-1"><a class="header-anchor" href="#参考文献"><span>参考文献</span></a></h3><ul><li><a href="https://www.ruanyifeng.com/blog/2015/12/git-workflow.html" target="_blank" rel="noopener noreferrer">Git 工作流程<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: chenjie@szy.cn">chenjie</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script src="/standard/assets/js/runtime~app.1a69b0ee.js" defer></script><script src="/standard/assets/js/353.569cdd4c.js" defer></script><script src="/standard/assets/js/app.444c5af1.js" defer></script>
  </body>
</html>
